

{% for module in resource.get_modules %}
									
    <div class="card">
	    <div id="headingOne" class="card-header bg-white shadow-sm border-0">
	    <h6 class="mb-0 accordion_title"><a href="course-detail.html#" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne" class="d-block position-relative text-dark collapsible-link py-2">{{ module.title }}</a></h6>
	    </div>
	    <div id="collapseOne" aria-labelledby="headingOne" data-parent="#accordionExample" class="collapse show">
	    <div class="card-body pl-3 pr-3">
		    <ul class="lectures_lists">
                <li>
                    <div>
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalQuickView">Launch
                          lecture</button>
                        <!-- Modal: modalQuickView -->
                        <div class="modal fade" id="modalQuickView" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                          aria-hidden="true">
                          <div class="modal-dialog modal-lg" role="document">
                            <div class="modal-content">
                              <div class="modal-body">
                                <div class="row">
                                  
                                  <div class="col-lg-12">
                                    <h2 class="h2-responsive product-name">
                                      <strong>{{ module.title }}</strong>
                                    </h2>

                                    <!--Accordion wrapper-->
                                    <div class="accordion md-accordion" id="accordionEx" role="tablist" aria-multiselectable="true">


                                        <!-- Accordion card -->
                                      <div class="card">

                                          <!-- The video tag: https://pypi.org/project/django-embed-video/ -->
                                            {% if module.video_url %}
                                            {% load embed_video_tags %}
                                            {% video module.video_url as my_video %}
                                                  

                                               
                                        <!-- Card header -->
                                        <div class="card-header" role="tab" id="headingOne1">
                                          <a data-toggle="collapse" data-parent="#accordionEx" href="#collapseOne1" aria-expanded="true"
                                            aria-controls="collapseOne1">
                                            <h5 class="mb-0">
                                              Video <i class="fas fa-angle-down rotate-icon"></i>
                                            </h5>
                                          </a>
                                        </div>

                                        <!-- Card body -->
                                        <div id="collapseOne1" class="collapse show" role="tabpanel" aria-labelledby="headingOne1"
                                          data-parent="#accordionEx">
                                          <div class="card-body">
                                              {% video my_video "small" %}
                                              
                                          </div>
                                        </div>
                                             
                                                {% endvideo %}
                                                
                                                <!-- end video -->
                                                
                                            {% endif %}

                                      </div>


                                      <!-- Accordion card -->
                                      <div class="card">

                                        <!-- Card header -->
                                        <div class="card-header" role="tab" id="headingOne2">
                                          <a data-toggle="collapse" data-parent="#accordionEx" href="#collapseOne2" aria-expanded="true"
                                            aria-controls="collapseOne2">
                                            <h5 class="mb-0">
                                              Summary <i class="fas fa-angle-down rotate-icon"></i>
                                            </h5>
                                          </a>
                                        </div>

                                        <!-- Card body -->
                                        <div id="collapseOne2" class="collapse show" role="tabpanel" aria-labelledby="headingOne2"
                                          data-parent="#accordionEx">
                                          <div class="card-body">
                                              {{ module.summary }}
                                          </div>
                                        </div>

                                      </div>
                                      <!-- Accordion card -->

                                      <!-- Accordion card -->
                                      <div class="card">

                                        <!-- Card header -->
                                        <div class="card-header" role="tab" id="headingTwo2">
                                          <a class="collapsed" data-toggle="collapse" data-parent="#accordionEx" href="#collapseTwo2"
                                            aria-expanded="false" aria-controls="collapseTwo2">
                                            <h5 class="mb-0">
                                              Reference Resources <i class="fas fa-angle-down rotate-icon"></i>
                                            </h5>
                                          </a>
                                        </div>

                                        <!-- Card body -->
                                        <div id="collapseTwo2" class="collapse" role="tabpanel" aria-labelledby="headingTwo2"
                                          data-parent="#accordionEx">
                                          <div class="card-body">
                                          
                                            <ul>
                                                {% for reference in module.get_module_reference_urls %}
                                                    <li><a target="_blank" href="{{ reference.reference_material_url }}" class="btn btn-primary">{{reference.name_of_website}}</a></li>
                                                {% endfor %}
                                            </ul>
                                            
                                          </div>
                                        </div>

                                      </div>
                                      <!-- Accordion card -->

                                      <!-- Accordion card -->
                                      <div class="card">

                                        <!-- Card header -->
                                        <div class="card-header" role="tab" id="headingThree3">
                                          <a class="collapsed" data-toggle="collapse" data-parent="#accordionEx" href="#collapseThree3"
                                            aria-expanded="false" aria-controls="collapseThree3">
                                            <h5 class="mb-0">
                                              Reference Downloads <i class="fas fa-angle-down rotate-icon"></i>
                                            </h5>
                                          </a>
                                        </div>

                                        <!-- Card body -->
                                        <div id="collapseThree3" class="collapse" role="tabpanel" aria-labelledby="headingThree3"
                                          data-parent="#accordionEx">
                                          <div class="card-body">
                                            <ul>
                                                {% for reference in module.get_module_reference_downloads %}
                                                    <li><a target="_blank" href="{{ reference.reference_material_download.url }}" class="btn btn-primary">{{reference.name_of_document}}</a></li>
                                                {% endfor %}
                                            </ul>
                                          </div>
                                        </div>

                                      </div>
                                      <!-- Accordion card -->

                                    </div>
                                    <!-- Accordion wrapper -->


                                    <!-- Mark as finished -->
                                    <div class="card-body">
                                      <div class="row">
                                      </div>
                                    <form id="mark_finish_form">{% csrf_token %}
                                      <div class="text-center">
                                          <input type="hidden" name="module_id" id="module_id" value="{{module.id}}" />
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                          <input type="submit" class="btn btn-primary" name="submit" value="submit" />
                                        <button type="submit" class="btn btn-primary">Mark as Finished
                                          <i class="fas fa-check ml-2" aria-hidden="true"></i>
                                        </button>
                                      </div>
                                    </form>
                                        	<!--form submit ajax-->
	                                <script type="text/javascript">
		                                $('#mark_finish_form').on('submit', function (e) {
			                                e.preventDefault();//prevents from reloading
			                                $.ajax({
				                                type: 'POST',
				                                url: '/learning_module/post/complete/',
				                                data: {
					                                module_id: $('#module_id').val(),
					                                csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
				                                },
				                                success: function (data) {
                                                    $('button').html(data);
				                                }
			                                });
		                                });
	                                </script>
                                        <!--./ for msubmit ajax-->
                                    </div>
                                    <!-- /.Mark as finished -->
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <script>
	                        $(document).ready(function() {
	                        $('.mdb-select').materialSelect();
                            });

                            ///form submit function
                           /*     $('#form').submit(function(e){
                                $.post('learning_module/post/complete/', $(this).serialize(), function(data){ 
                                   $('.message').html(data.message);
                                   // of course you can do something more fancy with your respone
                                });
                                e.preventDefault();
                            });*/
                        </script>
                    </div>
                </li>
			    <li><div class="lectures_lists_title"><i class="ti-control-play"></i>Lecture: 01</div>{{ module.summary }}</li>
		    </ul>
	    </div>
	    </div>
    </div>

<script>
    $('#form').submit(function(e){
    $.post('/learning_module/post/complete/', $(this).serialize(), function(data){ 
       $('.message').html(data.message);
       // of course you can do something more fancy with your respone
    });
    e.preventDefault();
});
</script>
{% endfor %}
